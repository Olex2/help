#set:bg_colour=gui.html.bg_colour
#set:font_colour=gui.html.font_colour

set:font_colour_code=#aaaaff
set:font_colour_bold=gui.html.highlight_colour

c:html.ItemState index* 0
c:html.ItemState index-home 1
c:html.ItemState tab* 2
c:lines 10

p:This tutorial will look at how to get geometrical measurements and analyses from your 3D model using the Olex2 system and the sample structure <b>THPP</b>.
c:freeze(true)
c:reap 'DataDir()/samples/THPP/THPP.res'
c:spy.revert_to_original()
c:mpln -n
c:showQ False
c:freeze(false)

p:To start, click on the <b>View</b> tab.
h:tab-view
c:spy.demo.switch_tab_for_tutorials(view)

p:Next, select the <b>Geometry</b> tool tab.
h:h2-geometry
c:html.ItemState h2-view-geometry 1

p:In this tab there are six different buttons to analyse your model and gather geometric data from it. The first one we will look at is <b>Mean Plane</b> (of active selection).

p:To see how this feature is used, highlight one of the rings in the structure. To do this, hold <b>shift</b> and draw a box over one of the rings with the mouse, or click on each ring atom to select it manually.
c:sel N3 C2 C1 C10 C9 C4
c:refresh

p:Once the atoms are highlighted, click on the <b>Mean Plane</b> button and the average plane for the selected atoms will be produced on the model. Alternatively, enter the command '<c>mpln sel</c>'.
c:mpln -n=DEMO_PLANE
c:refresh

p:Once the mean plane has been worked out, a table containing the results appears in the text output along with the data for the plane normal (hkl direction) and the rms deviation (in &Aring) of the atomic positions from the mean plane.

p:To remove the plane, first click on it to select it. Then either press the <b>Delete</b> key on your keyboard or right-click on the plane and choose to either hide it or delete it from there.
c:kill DEMO_PLANE
c:refresh

p:The next function will allow you to find the best line through the selected atoms by clicking on <b>Best Line</b> (of active selection).

p:To get an overall best line through the whole molecule, select all atoms with <b>ctrl+A</b> and click <b>Best Line</b>.
c:sel -a
c:line -n=DEMO_LINE_ALL_ATOMS

p:To align the molecule along the best line use '<c>line -n</c>'.
c:sel -a
c:line -n

p:The view will now have changed so that you are looking along the best line of the active selection. The '<c>direction</c>' command prints the current orientation of the model (in fractional coordinates).
c:direction

p:The view may be rotated around the x, y, or z axis using the 'rota' command, e.g., '<c>rota y 90</c>' provides a view perpendicular to the Best Line.
c:rota y 90
c:refresh

p:Alternatively, you can draw a line through a minimum of two selected atoms in your structure.
c:kill DEMO_LINE_ALL_ATOMS
c:sel N5 C10
c:line sel -n=DEMO_LINE_TWO_ATOMS

p:The next function in the Geometry tool tab is <b>Distances and Angles</b> (of selection). Select up to four atoms, then click this button or type '<c>sel</c>'; the geometric data pertaining to your selection will appear in the command window.
c:kill DEMO_LINE_TWO_ATOMS
c:sel -u
c:sel C11 C10 C1 F1
c:sel
c:refresh

p:The <b>Refine and Save e.s.d. info</b> button needs to be clicked once to refine the model and calculate needed e.s.d.'s.
c:delins more
c:addins more -3
c:refine

p:Select up to four atoms. Typing '<c>esd</c>' will then cause the e.s.d. data for your selection to appear in the command window in the software.
c:sel -u
c:sel C1 C2
c:esd
c:refresh

p:To use the <b>Analyse &pi;-&pi; Interactions</b> function, simply click on the button without highlighting anything.
c:pipi -g
c:rota x 90
c:refresh

p:This will duplicate the molecules to show interactions between adjacent aromatic rings and print some geometric data in the command window.
c:fuse
c:refresh

p:Another command you could also use would be the '<c>htab</c>' command.

p:If the command '<c>htab</c>' is entered into the command line, then this will add in found hydrogen bonds to the list for the refinement programme to add to the CIF file.

p:The next command would not work on the currently loaded molecule so the model for <b>Sucrose</b> will be loaded in order to show an example of the command working.
c:reap 'DataDir()/samples/Sucrose/Sucrose.res'

p:You can also cause the molecules to grow and show hydrogen bond interactions between molecules by typing in the command '<c>htab -g</c>'.
c:htab -g
c:refresh

p:There is also another <b>htab</b> command that can be used which is '<c>htab -t</c>'  which will allow you to attach unconventional hydrogen bonds to atoms. For example if the command was '<c>htab -t=Br,I</c>', this would cause the Br to gain a bond with I.

p:End of tutorial, click on the 'Next' button to replay the tutorial or the 'Cancel' button to exit.