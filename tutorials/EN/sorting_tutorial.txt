#set:bg_colour=gui.html.bg_colour
#set:font_colour=gui.html.font_colour

set:font_colour_code=#aaaaff
set:font_colour_bold=gui.html.highlight_colour

c:fuse
c:html.ItemState index* 0
c:html.ItemState tab* 2
c:html.ItemState index-home 1
c:lines 10
c:showq false

p:This tutorial will show you how to use the sorting options in Olex2. The first thing this tutorial will do is to load <b>Sucrose</b> as an example to show this.
c:freeze(true)
c:reap 'DataDir()/samples/sucrose/sucrose.res'
c:spy.revert_to_original()
c:freeze(false)

p:Click on the <b>Work</b> tab in the top toolbar.
h:tab-work
c:spy.demo.switch_tab_for_tutorials(work)

p:Then select the <b>Sorting</b> tab.
h:h2-sorting
c:html.ItemState h2-work-sorting 1

#p:Once the tab has been opened there will be 4 buttons in the tab. The first button <b>Mass & Label</b> creates a table that sorts the atoms by mass but allows for the labels to be used in other areas.
p:There are four drop-down menus in this tab, which will allow atoms to be sorted in any desired order, e.g., by part number first, then by atomic number (<i>Z</i>), and finally by atomic label.

#p:The table gives you the results for the Atom label, Type, its X,Y and Z position, Ueq, Chemical Occupancy, Peak, R-bond and R-VdW.

p:Clicking the <b>Sort</b> button will resort the atoms in the structure according to your preferences selected from the drop-down menu and output the sorted list on the screen.
h:small-Sort
#c:html.call(IMG_BUTTON-SORT.onclick)
c:spy.gui.do_sort()
c:refresh

p:After sorting, select all atoms and type 'info' in the command line to print out a table of results (atomic positions, Ueq's, etc.) in the command window.
c:sel $*
c:info
c:refresh

p:In order to see all the lines of text in the command window, type the command '<c>lines -1</c>'.
c:lines -1
c:refresh

p:If there is still insufficient space on the screen to view the entire table, type '<c>text</c>' to open a text file containing the screen output. You can also open this text file by clicking on the notepad icon at the top of the GUI window.
h:toolbar-text
c:text

p:To make it easier to find the relevant information, type in the command '<c>clear</c>' first, then select all atoms, sort them as desired, type '<c>info</c>' again, and then type '<c>text</c>' to display a text file containing only the data table.
c:clear
#c:html.call(IMG_BUTTON-SORT.onclick)
c:sel $*
c:spy.gui.do_sort()
c:info
c:text

p:It is also possible to sort from the command line. For example, '<c>sort +al</c>' will sort the table alphabetically by atom label, after which the results can be displayed with the '<c>info</c>' command as before.
c:sort +al
c:sel $*
c:info
c:refresh

p:To sort by atomic mass, type '<c>sort +m</c>'. The '<c>info</c>' command will again display the resorted table.
c:sort +m
c:sel $*
c:info
c:refresh

p:The last function in the tab is <b>Moieties</b> which allows you to sort atoms in structures like <b>ZP2</b>, that have more than one molecular entity in the asymmetric unit, in a split format. <b>ZP2</b> will now be loaded.
c:freeze(true)
c:reap 'DataDir()/samples/ZP2/ZP2.res'
c:spy.revert_to_original()
c:freeze(false)

p:Select an option such as 'Mass' from the <b>Moiety</b> drop-down menu to sort the moieties by mass first. (In this case, both moieties have the same mass.) Next, click on the <b>Sort</b> button as before to sort atoms <i>separately in each moiety</i>.
c:html.setvalue(sorting_moiety, Mass)
c:spy.SetParam('user.sorting.moiety', html.GetValue('sorting_moiety'))
c:spy.gui.do_sort()
c:refresh

p:You can view the resulting data table with the '<c>text</c>' command as usual. Within each moiety, the atoms will be sorted according to the sort order chosen in the GUI, e.g., by part, then by atomic number, then by atom label.
c:clear
c:sel $*
c:info
c:text

p:You can combine these sorting options to get various types of sorted tables. Type '<c>help sort</c>' to see all the options available.
c:help sort
c:refresh

p:An example that you may want to try out would be to mix the moiety sort with the mass and label sort. To do this, type into the command line '<c>sort +ml moiety</c>'.
c:sort +ml moiety
c:info
c:refresh

p:This should have now produced a table that has the atoms sorted by their atomic mass but still relative to which molecule they came from with the labels they have been given.
c:text

p:You can also switch which way round the molecules appear in the moiety list by adding an extra part to the end of the command line, so for example in the example we are using, you enter in the command '<c>sort +ml moiety F2 F1</c>'
c:sort +ml moiety F2 F1
c:info
c:refresh
c:text

p:End of tutorial. Press 'Next' to repeat the tutorial or 'Cancel' to exit.