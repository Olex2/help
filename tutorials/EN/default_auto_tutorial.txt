## Please note that all actions from all_tutorials_preamble.txt will be added here!

c:html.ItemState home-start 2
c:showQ a True
c:showQ b False

p:Welcome to this introductory <font color="rgb(255,100,50)">Olex2</font color="rgb(255,100,50)"> tutorial. Press 'Next' to advance to the next screen in the tutorial or 'Cancel' to leave the tutorial. Structures are loaded from the <b>Start</b> tool tab. This tool tab will be highlighted when you press 'Next'.
#c:@py "import time"
#c:@py "time.sleep(5)"
h:h2-Start
c:html.ItemState home-start 1
c:reset

p:Clicking any of the buttons in this tool tab opens a sample structure provided with Olex2. In this tutorial, the <b>Sucrose</b> structure will be solved and refined. Please press 'Next' to load it (this may take some time!).
c:refresh
c:freeze(true)
c:reap DataDir()/samples/sucrose/sucrose.res
c:spy.revert_to_original()
c:center
c:freeze(false)
c:refresh

p:The <b>Work</b> tab contains all the main solution and refinement tools in Olex2.
h:tab-work;3
c:spy.demo.switch_tab_for_tutorials(work)

p:From here, one can <b>Solve</b>, <b>Refine</b>, <b>Draw</b> and produce a final <b>Report</b> for a structure.
h:btn-solve;3
h:btn-refine;3
h:btn-draw;3
h:btn-report;3

p:The files needed for solving and refining a crystal structure with Olex2 are a reflection file (<b>name.hkl</b>) and an input file (<b>name.ins</b>) containing the crystallographic unit cell you determined during the diffraction experiment. These files should have the same name and reside in the same directory.

p:Choose a solution program from the <b>Program</b> dropdown menu (e.g., ShelXT, olex.solve). Click the <b>Solve</b> button or type '<c>solve</c>' into the command window to solve the structure. We will do this now for the sucrose sample structure just opened.
h:btn-solve;1
c:solve
c:waitfor process
c:refresh

p:The gold spheres that appear after solution are regions of high electron density (i.e., likely positions of atoms). Tidy up this solution by pressing the <b>Clean</b> button or by typing '<c>clean</c>' at the command prompt.
h:toolbar-tidy
c:clean
c:compaq -a
c:refresh

p:Let's press the <b>Refine</b> button or type '<c>refine</c>' and refine what we've got so far.
h:btn-refine;1
c:refine

p:For every instruction that you can use in the graphics window, a short help description tells you the function and possibly switches. If you type '<c>help clean</c>'...
c:help clean
c:refresh

p:...the 'macro Clean' is described in the graphics window. Let's clean once again.
c:clean

p:With the <b>Uiso Slider</b> in the <b>Toolbox Work</b> we can select all those atoms that look 'too small'.
c:html.ItemState work-main-toolbar 1
c:html.ItemState h3-peak-and-uiso-sliders 1
c:html.setBG(UISO_SELECT_SLIDER,#ff0000)
c:html.setvalue(UISO_SELECT_SLIDER,-7)
c:html.setvalue(UisoSelectVal,<0.035)
c:sel atoms where xatom.uiso < 0.035&&xatom.type!='Q'
c:refresh

p:...and make them into Oxygen by pressing the <b>O</b> button.
h:btn-elementO
c:name sel O
c:refresh

p:Refine this again...
c:refine

p:...and clean.
c:clean

p:Now it's time to make everything <b>anisotropic</b>. Type '<c>anis</c>' or click on the <b>ANIS</b> button.
h:toolbar-anis
c:anis
c:refine

p:...clean it...
c:clean

p:Let's add some hydrogen atoms to this. Type '<c>hadd</c>' or click on the <b>Add H</b> button.
h:small-Add_H
c:hadd
c:refine
c:refresh

p:You can toggle the display of electron density peaks (Q-peaks) by repeatedly pressing the <b>Q</b> button or by '<c>CTRL+Q</c>'.
h:toolbar-Q
c:showQ False
c:refresh
##

p:Of course, we can change the settings of the solution program.

p:We do this, by clicking the <b>Solution Settings</b> button.
h:cbtn-solve
c:html.ItemState solve-settings 1


p:Here we can choose solution programs and settings...
h:SET_snum_solution_PROGRAM_bg
h:SET_snum_solution_METHOD_bg

p:...set the <b>Formula</b> and can determine the <b>space group</b>.
h:SET_SNUM_REFINEMENT_FORMULA_bg
h:SET_SNUM_REFINEMENT_SPACE_GROUP_bg

p:When you click on <b>Suggest SG</b> link, or type '<c>sg</c>', watch what happens in the graphics window!
c:sg
c:refresh

p:In order to see all the console output in the graphics window, you can type '<c>lines -1</c>'.
c:lines -1
c:refresh

p:To show only 10 lines, type '<c>lines 10</c>'.
c:lines 10
c:refresh
c:html.ItemState solve-settings 2

p:If you type '<c>text</c>' or press the little text icon, you will get a 'transcript' of the console in your text editor.
h:toolbar-text
c:text
c:refresh

p:To clear the console output, type '<c>clear</c>'.
c:clear
c:refresh
c:html.ItemState solve-settings 2

p:We hope you enjoyed this first introduction to Olex2 - please let us know if we missed out any essential steps in this manual by visiting www.olex2.org and getting engaged in the Olex2 development.


c:spy.demo.switch_tab_for_tutorials(home)
p:End of tutorial, press 'Next' to repeat the tutorial or 'Cancel' to exit. <br><font size='1'>Written by Stefanie Freitag-Pohl.</font>